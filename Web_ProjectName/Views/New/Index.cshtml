@{
    ViewData["Title"] = "Quản lý Tin tức";
    Layout = "_LayoutDashmin";
}

@section Styles {
    <link href="~/lib/datatable/css/dataTables.min.css" rel="stylesheet" />
    <link href="~/lib/select2/css/select2.min.css" rel="stylesheet" />
    <link href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="~/lib/izi-toast-mater/css/iziToast.css" rel="stylesheet" />
    <link href="~/lib/izi-toast-mater/css/iziToast.min.css" rel="stylesheet" />

    <style>
        .select2-container--open {
            z-index: 9999 !important;
        }

        .modal-backdrop {
            z-index: 1040 !important;
        }

        .modal {
            z-index: 1050 !important;
        }

        .modal .select2-container--open {
            z-index: 9999 !important;
        }

        .datepicker {
            z-index: 9999 !important;
        }

        .modal .dropdown-menu {
            z-index: 9999 !important;
        }

        .modal .select2-container {
            width: 100% !important;
        }

        .modal .select2-selection {
            height: 38px !important;
            border: 1px solid #ced4da !important;
        }

        .modal .select2-selection__rendered {
            line-height: 36px !important;
        }

        .modal .select2-selection__arrow {
            height: 36px !important;
        }
    </style>
}

<div class="row g-4">
    <div class="col-12">
        <div class="bg-light rounded h-100 p-4">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h6 class="mb-0">Quản lý Tin tức</h6>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addNewsModal">
                    <i class="fas fa-plus me-2"></i>Thêm tin tức mới
                </button>
            </div>

            <!-- Search and Filter Section -->
            @* <div class="row mb-4">
                <div class="col-md-2">
                    <label for="searchKeyword" class="form-label">Từ khóa tìm kiếm</label>
                    <input type="text" class="form-control" id="searchKeyword" placeholder="Nhập từ khóa...">
                </div>
                <div class="col-md-2">
                    <label for="categoryFilter" class="form-label">Danh mục</label>
                    <select class="form-control select2" id="categoryFilter">
                        <option value="">Tất cả danh mục</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="statusFilter" class="form-label">Trạng thái</label>
                    <select class="form-control" id="statusFilter">
                        <option value="">Tất cả trạng thái</option>
                        <option value="0">Không hoạt động</option>
                        <option value="1">Hoạt động</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="dateFrom" class="form-label">Từ ngày</label>
                    <input type="text" class="form-control datepicker" id="dateFrom" placeholder="dd/mm/yyyy">
                </div>
                <div class="col-md-3">
                    <label for="dateTo" class="form-label">Đến ngày</label>
                    <input type="text" class="form-control datepicker" id="dateTo" placeholder="dd/mm/yyyy">
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-12">
                    <button type="button" class="btn btn-primary me-2" id="btnSearch">
                        <i class="fas fa-search me-2"></i>Tìm kiếm
                    </button>
                    <button type="button" class="btn btn-secondary" id="btnReset">
                        <i class="fas fa-undo me-2"></i>Làm mới
                    </button>
                </div>
            </div> *@

            <!-- News DataTable -->
            <div class="table-responsive">
                <table id="newsDataTable" class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Hình ảnh</th>
                            <th>Tiêu đề</th>
                            <th>Danh mục</th>
                            <th>Ngày đăng</th>
                            <th>Lượt xem</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Sample data for demonstration -->
                        <tr>
                            <td>1</td>
                            <td>
                                <img src="~/images/no-data/no-data.png" alt="News Image" class="img-thumbnail"
                                    style="width: 50px; height: 50px; object-fit: cover;">
                            </td>
                            <td>
                                <strong>Tin tức mẫu 1</strong>
                                <br><small class="text-muted">Mô tả ngắn của tin tức mẫu...</small>
                            </td>
                            <td><span class="badge bg-primary">Công nghệ</span></td>
                            <td>15/12/2024</td>
                            <td><span class="badge bg-info">1,234</span></td>
                            <td><span class="badge bg-success">Đã đăng</span></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-sm btn-info" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-warning" title="Chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-danger" title="Xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>
                                <img src="~/images/no-data/no-data.png" alt="News Image" class="img-thumbnail"
                                    style="width: 50px; height: 50px; object-fit: cover;">
                            </td>
                            <td>
                                <strong>Tin tức mẫu 2</strong>
                                <br><small class="text-muted">Mô tả ngắn của tin tức mẫu thứ hai...</small>
                            </td>
                            <td><span class="badge bg-warning">Kinh doanh</span></td>
                            <td>14/12/2024</td>
                            <td><span class="badge bg-info">856</span></td>
                            <td><span class="badge bg-warning">Chờ duyệt</span></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-sm btn-info" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-warning" title="Chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-danger" title="Xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>
                                <img src="~/images/no-data/no-data.png" alt="News Image" class="img-thumbnail"
                                    style="width: 50px; height: 50px; object-fit: cover;">
                            </td>
                            <td>
                                <strong>Tin tức nổi bật</strong>
                                <br><small class="text-muted">Tin tức nổi bật với nhiều lượt xem...</small>
                                <span class="badge bg-danger ms-2"><i class="fas fa-fire"></i> Hot</span>
                            </td>
                            <td><span class="badge bg-success">Giải trí</span></td>
                            <td>13/12/2024</td>
                            <td><span class="badge bg-danger">5,678</span></td>
                            <td><span class="badge bg-success">Đã đăng</span></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-sm btn-info" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-warning" title="Chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-danger" title="Xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@await Html.PartialAsync("P_AddForm")
@await Html.PartialAsync("P_EditForm")
@await Html.PartialAsync("P_ViewModal")

@section Scripts {
    <link rel="stylesheet" type="text/css" href="~/lib/datatable/css/datatables.min.css">
    <link rel="stylesheet" type="text/css" href="~/lib/datatable/css/responsive.dataTables.min.css">

    <link rel="stylesheet" type="text/css" href="~/lib/select2/css/select2.min.css">

    <link rel="stylesheet" type="text/css" href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">

    <script src="~/lib/ckeditor/ckeditor.js"></script>

    <script type="text/javascript" src="~/lib/datatable/js/datatables.min.js"></script>
    <script type="text/javascript" src="~/lib/datatable/js/datatables.bootstrap4.min.js"></script>
    <script type="text/javascript" src="~/lib/datatable/js/dataTables.responsive.min.js"></script>

    <script src="~/lib/select2/js/select2.min.js"></script>

    <script src="~/lib/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="~/lib/bootstrap-datepicker/dist/js/il8n/vi.js"></script>

    <link rel="stylesheet" href="~/lib/izi-toast-mater/css/iziToast.min.css">
    <script src="~/lib/izi-toast-mater/iziToast.min.js"></script>
    <script src="~/js/call-api.js"></script>
    <script src="~/js/news_management.js"></script>
}